[package]
name = "flow-like-catalog-data"
version = "0.1.0"
edition = "2024"

[features]
default = []
local-ml = ["flow-like-catalog-core/local-ml"]
# Data lake formats
delta = ["flow-like-storage/delta"]
# Database providers (requires datafusion-table-providers)
# Note: Federation features (*-federation) require datafusion-federation 0.4.7+ which needs DataFusion 50+
# When upgrading to DataFusion 50+, add federation features: e.g., postgres-federation, mysql-federation, etc.
postgres = ["datafusion-table-providers/postgres"]
mysql = ["datafusion-table-providers/mysql"]
sqlite = ["datafusion-table-providers/sqlite"]
duckdb = ["datafusion-table-providers/duckdb"]
clickhouse = ["datafusion-table-providers/clickhouse"]
flight = ["datafusion-table-providers/flight"]
odbc = ["datafusion-table-providers/odbc"]
# Federation support (requires DataFusion 50+ - currently disabled)
# When enabled, adds federation optimizer rules for query push-down to remote databases
# federation = ["datafusion-table-providers/federation", "flow-like-storage/federation"]
# Feature bundles
all-lakes = ["delta"]
all-databases = ["postgres", "mysql", "sqlite", "duckdb", "clickhouse", "flight"]
full = ["all-lakes", "all-databases"]

[dependencies]
flow-like-catalog-core.workspace = true
flow-like.workspace = true
flow-like-types.workspace = true
flow-like-model-provider.workspace = true
flow-like-storage.workspace = true
flow-like-catalog-macros.workspace = true
inventory = "0.3"
ahash.workspace = true
tracing.workspace = true
schemars.workspace = true
futures.workspace = true
serde = { workspace = true, features = ["derive", "rc"] }
tokio = { workspace = true, features = ["rt-multi-thread", "macros"] }
uuid.workspace = true
async-trait.workspace = true
base64.workspace = true
urlencoding.workspace = true
regex.workspace = true
chrono.workspace = true
chrono-tz.workspace = true
iana-time-zone.workspace = true
calamine = { version = "0.30", default-features = false, features = ["dates"] }
umya-spreadsheet = "2.3.2"
csv-async = { version = "1.3.0", features = ["tokio"] }
csv = "1.3"
dirs-next.workspace = true
jsonschema.workspace = true
rayon = "1.11.0"
once_cell = "1.21.3"
strsim = "0.11.1"

# Database table providers for DataFusion (v0.7.0 compatible with DataFusion 49)
datafusion-table-providers = { version = "0.7.0", default-features = false, optional = true }

[dev-dependencies]
reqwest = { version = "0.12", features = ["json"] }
uuid = { version = "1.11", features = ["v4"] }
tokio-postgres = { version = "0.7", features = ["with-serde_json-1", "with-chrono-0_4"] }
sqlx = { version = "0.8", features = ["runtime-tokio", "postgres", "mysql", "sqlite"] }
rand = "0.8"
futures = "0.3"
