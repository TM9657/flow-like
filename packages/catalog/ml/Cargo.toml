[package]
name = "flow-like-catalog-ml"
version = "0.1.0"
edition = "2024"

[features]
default = []
local-ml = ["flow-like-catalog-core/local-ml"]
# Execution feature - enables heavy ML dependencies for node execution
execute = [
    "flow-like-catalog-core/execute",
    "dep:linfa",
    "dep:linfa-datasets",
    "dep:linfa-clustering",
    "dep:linfa-nn",
    "dep:linfa-linear",
    "dep:linfa-reduction",
    "dep:linfa-svm",
]

[dependencies]
flow-like-catalog-core.workspace = true
flow-like.workspace = true
flow-like-types.workspace = true
flow-like-model-provider.workspace = true
flow-like-storage.workspace = true
flow-like-catalog-macros.workspace = true
inventory = "0.3"
ahash.workspace = true
tracing.workspace = true
schemars.workspace = true
futures.workspace = true
serde = { workspace = true, features = ["derive", "rc"] }
tokio = { workspace = true, features = ["rt-multi-thread", "macros"] }
uuid.workspace = true
async-trait.workspace = true
ndarray.workspace = true

# ML dependencies - only included when execute feature is enabled
linfa = { version = "0.8.0", features = ["serde"], optional = true }
linfa-datasets = { version = "0.8.0", features = ["generate"], optional = true }
linfa-clustering = { version = "0.8.0", features = ["serde"], optional = true }
linfa-nn = { version = "0.8.0", features = ["serde"], optional = true }
linfa-linear = { version = "0.8.0", features = ["serde"], optional = true }
linfa-reduction = { version = "0.8.0", features = ["serde"], optional = true }
linfa-svm = { version = "0.8.0", features = ["serde"], optional = true }
