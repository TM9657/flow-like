{
	"$schema": "https://json-schema.org/draft/2020-12/schema",
	"title": "Hub",
	"type": "object",
	"properties": {
		"name": {
			"type": "string"
		},
		"description": {
			"type": "string"
		},
		"thumbnail": {
			"type": ["string", "null"]
		},
		"icon": {
			"type": ["string", "null"]
		},
		"authentication": {
			"anyOf": [
				{
					"$ref": "#/$defs/Authentication"
				},
				{
					"type": "null"
				}
			]
		},
		"features": {
			"$ref": "#/$defs/Features"
		},
		"hubs": {
			"type": "array",
			"items": {
				"type": "string"
			}
		},
		"provider": {
			"type": ["string", "null"]
		},
		"domain": {
			"type": "string"
		},
		"region": {
			"type": ["string", "null"]
		},
		"terms_of_service": {
			"type": "string"
		},
		"signaling": {
			"type": ["array", "null"],
			"items": {
				"type": "string"
			}
		},
		"cdn": {
			"type": ["string", "null"]
		},
		"app": {
			"type": ["string", "null"]
		},
		"legal_notice": {
			"type": "string"
		},
		"privacy_policy": {
			"type": "string"
		},
		"contact": {
			"$ref": "#/$defs/Contact"
		},
		"max_users_prototype": {
			"type": ["integer", "null"],
			"format": "int32"
		},
		"default_user_plan": {
			"type": ["string", "null"]
		},
		"environment": {
			"$ref": "#/$defs/Environment"
		},
		"tiers": {
			"type": "object",
			"additionalProperties": {
				"$ref": "#/$defs/UserTier"
			}
		},
		"lookup": {
			"$ref": "#/$defs/Lookup",
			"default": {
				"email": false,
				"name": true,
				"username": false,
				"preferred_username": true,
				"avatar": true,
				"additional_information": true,
				"description": true,
				"created_at": true
			}
		}
	},
	"required": [
		"name",
		"description",
		"features",
		"hubs",
		"domain",
		"terms_of_service",
		"legal_notice",
		"privacy_policy",
		"contact",
		"environment",
		"tiers"
	],
	"$defs": {
		"Authentication": {
			"type": "object",
			"properties": {
				"variant": {
					"type": "string"
				},
				"openid": {
					"anyOf": [
						{
							"$ref": "#/$defs/OpenIdConfig"
						},
						{
							"type": "null"
						}
					]
				},
				"oauth2": {
					"anyOf": [
						{
							"$ref": "#/$defs/OAuth2Config"
						},
						{
							"type": "null"
						}
					]
				}
			},
			"required": ["variant"]
		},
		"OpenIdConfig": {
			"type": "object",
			"properties": {
				"authority": {
					"type": ["string", "null"]
				},
				"client_id": {
					"type": ["string", "null"]
				},
				"redirect_uri": {
					"type": ["string", "null"]
				},
				"post_logout_redirect_uri": {
					"type": ["string", "null"]
				},
				"response_type": {
					"type": ["string", "null"]
				},
				"scope": {
					"type": ["string", "null"]
				},
				"discovery_url": {
					"type": ["string", "null"]
				},
				"user_info_url": {
					"type": ["string", "null"]
				},
				"jwks_url": {
					"type": "string"
				},
				"proxy": {
					"anyOf": [
						{
							"$ref": "#/$defs/OpenIdProxy"
						},
						{
							"type": "null"
						}
					]
				},
				"cognito": {
					"anyOf": [
						{
							"$ref": "#/$defs/CognitoConfig"
						},
						{
							"type": "null"
						}
					]
				}
			},
			"required": ["jwks_url"]
		},
		"OpenIdProxy": {
			"type": "object",
			"properties": {
				"enabled": {
					"type": "boolean"
				},
				"authorize": {
					"type": ["string", "null"]
				},
				"token": {
					"type": ["string", "null"]
				},
				"userinfo": {
					"type": ["string", "null"]
				},
				"revoke": {
					"type": ["string", "null"]
				}
			},
			"required": ["enabled"]
		},
		"CognitoConfig": {
			"type": "object",
			"properties": {
				"user_pool_id": {
					"type": "string"
				}
			},
			"required": ["user_pool_id"]
		},
		"OAuth2Config": {
			"type": "object",
			"properties": {
				"authorization_endpoint": {
					"type": "string"
				},
				"token_endpoint": {
					"type": "string"
				},
				"client_id": {
					"type": "string"
				}
			},
			"required": ["authorization_endpoint", "token_endpoint", "client_id"]
		},
		"Features": {
			"type": "object",
			"properties": {
				"model_hosting": {
					"type": "boolean"
				},
				"flow_hosting": {
					"type": "boolean"
				},
				"governance": {
					"type": "boolean"
				},
				"ai_act": {
					"type": "boolean"
				},
				"unauthorized_read": {
					"type": "boolean"
				},
				"admin_interface": {
					"type": "boolean"
				},
				"premium": {
					"type": "boolean"
				}
			},
			"required": [
				"model_hosting",
				"flow_hosting",
				"governance",
				"ai_act",
				"unauthorized_read",
				"admin_interface",
				"premium"
			]
		},
		"Contact": {
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				},
				"email": {
					"type": "string"
				},
				"url": {
					"type": "string"
				}
			},
			"required": ["name", "email", "url"]
		},
		"Environment": {
			"type": "string",
			"enum": ["Development", "Production", "Staging"]
		},
		"UserTier": {
			"type": "object",
			"properties": {
				"max_non_visible_projects": {
					"type": "integer",
					"format": "int32"
				},
				"max_remote_executions": {
					"type": "integer",
					"format": "int32"
				},
				"execution_tier": {
					"type": "string"
				},
				"max_total_size": {
					"type": "integer",
					"format": "int64"
				},
				"max_llm_cost": {
					"type": "integer",
					"format": "int32"
				},
				"max_llm_calls": {
					"type": ["integer", "null"],
					"format": "int32"
				},
				"llm_tiers": {
					"type": "array",
					"items": {
						"type": "string"
					}
				}
			},
			"required": [
				"max_non_visible_projects",
				"max_remote_executions",
				"execution_tier",
				"max_total_size",
				"max_llm_cost",
				"llm_tiers"
			]
		},
		"Lookup": {
			"type": "object",
			"properties": {
				"email": {
					"type": "boolean"
				},
				"name": {
					"type": "boolean"
				},
				"username": {
					"type": "boolean"
				},
				"preferred_username": {
					"type": "boolean"
				},
				"avatar": {
					"type": "boolean"
				},
				"additional_information": {
					"type": "boolean"
				},
				"description": {
					"type": "boolean"
				},
				"created_at": {
					"type": "boolean"
				}
			},
			"required": [
				"email",
				"name",
				"username",
				"preferred_username",
				"avatar",
				"additional_information",
				"description",
				"created_at"
			]
		}
	}
}
