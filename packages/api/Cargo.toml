[package]
name = "flow-like-api"
version = "0.1.0"
edition = "2024"

[build-dependencies]
serde = { workspace = true, features = ["derive", "rc"] }
serde_json.workspace = true
flow-like-types.workspace = true
reqwest = { version = "0.12.15", features = ["blocking"] }

[dependencies]
axum.workspace = true
sea-orm.workspace = true
serde = { workspace = true, features = ["derive", "rc"] }
pin-project-lite = "0.2.16"
tower.workspace = true
flow-like.workspace = true
flow-like-types.workspace = true
flow-like-storage.workspace = true
serde_json.workspace = true
jsonwebtoken.workspace = true
hyper.workspace = true
hyper-util.workspace = true
tracing.workspace = true
tower-http.workspace = true
chrono.workspace = true
oasgen = {version="0.25.0", features = ["axum"]}
async-stripe.workspace = true
bitflags.workspace = true
futures-util.workspace = true
moka.workspace = true
blake3.workspace = true
p256 = "0.13.2"
async-trait.workspace = true

# ---- AWS dependencies ----
aws-config = {workspace = true, optional=true}
aws-sdk-sts = {workspace = true, optional=true}
aws-sdk-sesv2 = {workspace = true, optional=true}
# -----

# ----- Azure dependencies ----
hmac = { version = "0.12", optional = true }
sha2 = { version = "0.10", optional = true }
base64 = { workspace = true, optional = true }
urlencoding = { workspace = true, optional = true }
# -----

# ----- GCP dependencies ----
rsa = { version = "0.9", optional = true }
# -----

# ----- Cognito dependencies ----
aws-sdk-cognitoidentityprovider = {version="1.89.0", optional=true}
# -----

# ----- Mail dependencies ----
lettre = {workspace = true, optional=true}
reqwest = {workspace = true}
# -----

# ----- Kubernetes dependencies ----
kube = { workspace = true, optional = true }
k8s-openapi = { workspace = true, optional = true }
# -----

[features]
default = ["aws", "cognito", "ses", "smtp", "sendgrid"]
aws = ["aws-config", "aws-sdk-sts"]
azure = ["hmac", "sha2", "base64", "urlencoding"]
gcp = ["sha2", "base64", "rsa", "urlencoding"]
cognito = ["aws-sdk-cognitoidentityprovider", "aws-config"]
ses = ["aws-sdk-sesv2", "aws-config"]
smtp = ["lettre"]
sendgrid = []
local = []
kubernetes = ["kube", "k8s-openapi"]
full=[
    "aws",
    "azure",
    "gcp",
    "local",
    "ses",
    "smtp",
    "sendgrid",
]
urlencoding = ["dep:urlencoding"]

[dev-dependencies]
tokio = { workspace = true, features = ["macros", "rt-multi-thread"] }
dotenv = { workspace = true }
