[package]
name = "flow-like-storage"
version = "0.1.0"
edition = "2024"

[dependencies]
flow-like-types.workspace = true
object_store = {version="0.12.4", features = ["gcp", "aws", "azure", "serde", "serde_json", "cloud"] }
lancedb = { git = "https://github.com/TM9657/lancedb.git", rev="5b6f4bb", features = ["polars"]}
polars = "0.39.2"
polars-arrow = "0.39.2"
arrow-array = "55.1"
arrow-schema = {version="55.1", features = ["serde"] }
arrow = "55.1"
serde_arrow = { version = "0.13.4", features = ["arrow-55"] }
blake3 = {version = "1.8.1", features = ["rayon"]}
futures.workspace = true
serde = { workspace = true, features = ["derive", "rc"] }
futures-channel = "0.3.31"
crossbeam-channel = "0.5.15"
futures-util = "0.3.31"
urlencoding.workspace = true
schemars.workspace = true
base64.workspace = true
datafusion = { version = "49.0.2", default-features = false, features = ["recursive_protection", "regex_expressions", "string_expressions", "unicode_expressions", "array_expressions", "nested_expressions", "math_expressions", "datetime_expressions", "parquet"]}
num_cpus = "1.16"
percent-encoding.workspace = true
infer = "0.19.0"
rig-core.workspace = true
rmcp.workspace = true

# Data lake formats - Delta Lake support (v0.28 compatible with datafusion 49 + arrow 55)
deltalake = { version = "0.28", optional = true, default-features = false, features = ["datafusion", "rustls"] }

# Note: Federation support requires datafusion-federation 0.4.7+ which needs DataFusion 50+
# When upgrading to DataFusion 50+, add: datafusion-federation = { version = "0.4.7", optional = true }

[features]
tauri = []
default = []

# Data lake features
delta = ["deltalake"]
all-lakes = ["delta"]

# Note: Federation feature will be available when upgrading to DataFusion 50+
# federation = ["datafusion-federation"]

# Full feature set
full = ["all-lakes"]
