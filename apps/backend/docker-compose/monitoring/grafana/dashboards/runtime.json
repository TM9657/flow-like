{
	"annotations": { "list": [] },
	"editable": false,
	"fiscalYearStartMonth": 0,
	"graphTooltip": 1,
	"links": [
		{
			"asDropdown": false,
			"icon": "external link",
			"includeVars": true,
			"keepTime": true,
			"tags": ["flow-like"],
			"targetBlank": false,
			"title": "Flow-Like Dashboards",
			"type": "dashboards"
		}
	],
	"liveNow": false,
	"panels": [
		{
			"gridPos": { "h": 3, "w": 24, "x": 0, "y": 0 },
			"id": 1,
			"options": {
				"content": "# Executor/Runtime Dashboard\nMonitoring for Flow-Like execution runtime",
				"mode": "markdown"
			},
			"title": "",
			"type": "text"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "thresholds" },
					"mappings": [
						{
							"options": {
								"0": { "color": "red", "index": 0, "text": "DOWN" },
								"1": { "color": "green", "index": 1, "text": "UP" }
							},
							"type": "value"
						}
					],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{ "color": "red", "value": null },
							{ "color": "green", "value": 1 }
						]
					},
					"unit": "short"
				}
			},
			"gridPos": { "h": 4, "w": 6, "x": 0, "y": 3 },
			"id": 2,
			"options": {
				"colorMode": "background",
				"graphMode": "none",
				"justifyMode": "center",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": ["lastNotNull"],
					"fields": "",
					"values": false
				},
				"textMode": "value"
			},
			"targets": [
				{ "expr": "up{job=\"flow-like-runtime\"}", "legendFormat": "Runtime" }
			],
			"title": "Runtime Status",
			"type": "stat"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "thresholds" },
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [{ "color": "green", "value": null }]
					},
					"unit": "short"
				}
			},
			"gridPos": { "h": 4, "w": 6, "x": 6, "y": 3 },
			"id": 3,
			"options": {
				"colorMode": "value",
				"graphMode": "area",
				"justifyMode": "auto",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": ["lastNotNull"],
					"fields": "",
					"values": false
				},
				"textMode": "auto"
			},
			"targets": [
				{
					"expr": "sum(rate(flow_executions_total[5m])) or vector(0)",
					"legendFormat": "Executions/sec"
				}
			],
			"title": "Execution Rate",
			"type": "stat"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "thresholds" },
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{ "color": "green", "value": null },
							{ "color": "yellow", "value": 5 },
							{ "color": "red", "value": 10 }
						]
					},
					"unit": "s"
				}
			},
			"gridPos": { "h": 4, "w": 6, "x": 12, "y": 3 },
			"id": 4,
			"options": {
				"colorMode": "value",
				"graphMode": "area",
				"justifyMode": "auto",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": ["lastNotNull"],
					"fields": "",
					"values": false
				},
				"textMode": "auto"
			},
			"targets": [
				{
					"expr": "histogram_quantile(0.95, sum(rate(flow_execution_duration_seconds_bucket[5m])) by (le)) or vector(0)",
					"legendFormat": "P95 Duration"
				}
			],
			"title": "P95 Execution Duration",
			"type": "stat"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "thresholds" },
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [{ "color": "green", "value": null }]
					},
					"unit": "short"
				}
			},
			"gridPos": { "h": 4, "w": 6, "x": 18, "y": 3 },
			"id": 5,
			"options": {
				"colorMode": "value",
				"graphMode": "area",
				"justifyMode": "auto",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": ["lastNotNull"],
					"fields": "",
					"values": false
				},
				"textMode": "auto"
			},
			"targets": [
				{
					"expr": "sum(executor_active_jobs) or vector(0)",
					"legendFormat": "Active"
				}
			],
			"title": "Active Executions",
			"type": "stat"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "palette-classic" },
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 10,
						"gradientMode": "none",
						"hideFrom": { "legend": false, "tooltip": false, "viz": false },
						"lineInterpolation": "smooth",
						"lineWidth": 2,
						"pointSize": 5,
						"scaleDistribution": { "type": "linear" },
						"showPoints": "never",
						"spanNulls": false,
						"stacking": { "group": "A", "mode": "none" },
						"thresholdsStyle": { "mode": "off" }
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [{ "color": "green", "value": null }]
					},
					"unit": "short"
				}
			},
			"gridPos": { "h": 8, "w": 12, "x": 0, "y": 7 },
			"id": 6,
			"options": {
				"legend": {
					"calcs": ["mean", "max"],
					"displayMode": "table",
					"placement": "bottom"
				},
				"tooltip": { "mode": "multi", "sort": "desc" }
			},
			"targets": [
				{
					"expr": "sum(rate(flow_executions_total[5m])) by (status)",
					"legendFormat": "{{status}}"
				}
			],
			"title": "Executions by Status",
			"type": "timeseries"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "palette-classic" },
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 10,
						"gradientMode": "none",
						"hideFrom": { "legend": false, "tooltip": false, "viz": false },
						"lineInterpolation": "smooth",
						"lineWidth": 2,
						"pointSize": 5,
						"scaleDistribution": { "type": "linear" },
						"showPoints": "never",
						"spanNulls": false,
						"stacking": { "group": "A", "mode": "none" },
						"thresholdsStyle": { "mode": "off" }
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [{ "color": "green", "value": null }]
					},
					"unit": "reqps"
				}
			},
			"gridPos": { "h": 8, "w": 12, "x": 12, "y": 7 },
			"id": 7,
			"options": {
				"legend": {
					"calcs": ["mean", "max"],
					"displayMode": "table",
					"placement": "bottom"
				},
				"tooltip": { "mode": "multi", "sort": "desc" }
			},
			"targets": [
				{
					"expr": "sum(rate(http_requests_total{job=\"flow-like-runtime\"}[5m])) by (path)",
					"legendFormat": "{{path}}"
				}
			],
			"title": "HTTP Requests by Path",
			"type": "timeseries"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "palette-classic" },
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 10,
						"gradientMode": "none",
						"hideFrom": { "legend": false, "tooltip": false, "viz": false },
						"lineInterpolation": "smooth",
						"lineWidth": 2,
						"pointSize": 5,
						"scaleDistribution": { "type": "linear" },
						"showPoints": "never",
						"spanNulls": false,
						"stacking": { "group": "A", "mode": "none" },
						"thresholdsStyle": { "mode": "line" }
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{ "color": "green", "value": null },
							{ "color": "yellow", "value": 5 },
							{ "color": "red", "value": 10 }
						]
					},
					"unit": "s"
				}
			},
			"gridPos": { "h": 8, "w": 12, "x": 0, "y": 15 },
			"id": 8,
			"options": {
				"legend": {
					"calcs": ["mean", "max"],
					"displayMode": "table",
					"placement": "bottom"
				},
				"tooltip": { "mode": "multi", "sort": "desc" }
			},
			"targets": [
				{
					"expr": "histogram_quantile(0.99, sum(rate(flow_execution_duration_seconds_bucket[5m])) by (le))",
					"legendFormat": "P99"
				},
				{
					"expr": "histogram_quantile(0.95, sum(rate(flow_execution_duration_seconds_bucket[5m])) by (le))",
					"legendFormat": "P95"
				},
				{
					"expr": "histogram_quantile(0.90, sum(rate(flow_execution_duration_seconds_bucket[5m])) by (le))",
					"legendFormat": "P90"
				},
				{
					"expr": "histogram_quantile(0.50, sum(rate(flow_execution_duration_seconds_bucket[5m])) by (le))",
					"legendFormat": "P50"
				}
			],
			"title": "Execution Duration Percentiles",
			"type": "timeseries"
		},
		{
			"datasource": { "type": "prometheus", "uid": "${datasource}" },
			"fieldConfig": {
				"defaults": {
					"color": { "mode": "palette-classic" },
					"custom": {
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 10,
						"gradientMode": "none",
						"hideFrom": { "legend": false, "tooltip": false, "viz": false },
						"lineInterpolation": "smooth",
						"lineWidth": 2,
						"pointSize": 5,
						"scaleDistribution": { "type": "linear" },
						"showPoints": "never",
						"spanNulls": false,
						"stacking": { "group": "A", "mode": "none" },
						"thresholdsStyle": { "mode": "off" }
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [{ "color": "green", "value": null }]
					},
					"unit": "s"
				}
			},
			"gridPos": { "h": 8, "w": 12, "x": 12, "y": 15 },
			"id": 9,
			"options": {
				"legend": {
					"calcs": ["mean", "max"],
					"displayMode": "table",
					"placement": "bottom"
				},
				"tooltip": { "mode": "multi", "sort": "desc" }
			},
			"targets": [
				{
					"expr": "histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{job=\"flow-like-runtime\"}[5m])) by (le, path))",
					"legendFormat": "{{path}}"
				}
			],
			"title": "HTTP Request Duration by Path (P95)",
			"type": "timeseries"
		}
	],
	"refresh": "30s",
	"schemaVersion": 38,
	"style": "dark",
	"tags": ["flow-like", "executor", "runtime"],
	"templating": {
		"list": [
			{
				"current": {
					"selected": false,
					"text": "Prometheus",
					"value": "Prometheus"
				},
				"hide": 0,
				"includeAll": false,
				"label": "Data Source",
				"multi": false,
				"name": "datasource",
				"options": [],
				"query": "prometheus",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"type": "datasource"
			}
		]
	},
	"time": { "from": "now-1h", "to": "now" },
	"timepicker": {},
	"timezone": "browser",
	"title": "Flow-Like Runtime",
	"uid": "flow-like-runtime",
	"version": 1
}
