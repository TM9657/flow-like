---
/**
 * IoT: Sensor nodes streaming telemetry through an edge gateway into a cloud dashboard
 */
interface Props { ring: string; dot: string; node: string; line: string; }
const { ring, dot, node, line } = Astro.props;
---

<svg viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md">
  <defs>
    <filter id="soft-glow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur stdDeviation="1.5" result="coloredBlur"/>
      <feComponentTransfer in="coloredBlur" result="softBlur">
         <feFuncA type="linear" slope="0.4"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode in="softBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <linearGradient id="chart-fill" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color={dot} stop-opacity="0.15"/>
      <stop offset="100%" stop-color={dot} stop-opacity="0"/>
    </linearGradient>
  </defs>

  <g opacity="0.03">
    <path d="M0 100 H400 M0 200 H400 M0 300 H400 M100 0 V400 M200 0 V400 M300 0 V400" stroke={ring} stroke-width="0.5" stroke-dasharray="2 6"/>
  </g>

  <path d="M 100 67 Q 140 67, 175 130" fill="none" stroke={line} stroke-width="1" opacity="0.05"/>
  <path d="M 100 147 Q 140 147, 175 150" fill="none" stroke={line} stroke-width="1" opacity="0.05"/>
  <path d="M 100 227 Q 140 227, 175 170" fill="none" stroke={line} stroke-width="1" opacity="0.05"/>
  <path d="M 100 307 Q 140 287, 175 190" fill="none" stroke={line} stroke-width="1" opacity="0.05"/>
  <path d="M 245 155 Q 280 155, 300 120" fill="none" stroke={line} stroke-width="1" opacity="0.05"/>
  <path d="M 245 170 Q 270 175, 275 195" fill="none" stroke={line} stroke-width="1" opacity="0.05"/>

  <path d="M 100 67 Q 140 67, 175 130" fill="none" stroke={line} stroke-width="0.8" stroke-dasharray="2 6" opacity="0.25">
    <animate attributeName="stroke-dashoffset" values="8;0" dur="1.5s" repeatCount="indefinite"/>
  </path>
  <path d="M 100 147 Q 140 147, 175 150" fill="none" stroke={line} stroke-width="0.8" stroke-dasharray="2 6" opacity="0.25">
    <animate attributeName="stroke-dashoffset" values="8;0" dur="1.8s" repeatCount="indefinite"/>
  </path>
  <path d="M 100 227 Q 140 227, 175 170" fill="none" stroke={line} stroke-width="0.8" stroke-dasharray="2 6" opacity="0.25">
    <animate attributeName="stroke-dashoffset" values="8;0" dur="1.6s" repeatCount="indefinite"/>
  </path>
  <path d="M 100 307 Q 140 287, 175 190" fill="none" stroke={line} stroke-width="0.8" stroke-dasharray="2 6" opacity="0.25">
    <animate attributeName="stroke-dashoffset" values="8;0" dur="2s" repeatCount="indefinite"/>
  </path>
  <path d="M 245 155 Q 280 155, 300 120" fill="none" stroke={line} stroke-width="0.8" stroke-dasharray="2 6" opacity="0.3">
    <animate attributeName="stroke-dashoffset" values="8;0" dur="1.2s" repeatCount="indefinite"/>
  </path>

  <g filter="url(#soft-glow)">
    <circle r="1.5" fill={dot} opacity="0.8">
      <animateMotion dur="2.5s" repeatCount="indefinite" path="M 100,67 Q 140,67, 175,130"/>
    </circle>
    <circle r="1.5" fill={dot} opacity="0.7">
      <animateMotion dur="2s" repeatCount="indefinite" path="M 100,147 Q 140,147, 175,150" begin="0.5s"/>
    </circle>
    <circle r="1.5" fill={dot} opacity="0.8">
      <animateMotion dur="2.8s" repeatCount="indefinite" path="M 100,227 Q 140,227, 175,170" begin="1s"/>
    </circle>
    <circle r="1.5" fill={dot} opacity="0.6">
      <animateMotion dur="2.2s" repeatCount="indefinite" path="M 100,307 Q 140,287, 175,190" begin="0.2s"/>
    </circle>
    <circle r="2" fill={dot} opacity="0.9">
      <animateMotion dur="1.5s" repeatCount="indefinite" path="M 245,155 Q 280,155, 300,120"/>
    </circle>
  </g>

  <rect x="20" y="40" width="80" height="55" rx="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="60" y="58" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace" letter-spacing="1">TEMP</text>
  <line x1="32" y1="64" x2="88" y2="64" stroke={ring} stroke-width="0.3" opacity="0.2"/>

  <path d="M 32 80 Q 42 72, 52 80 Q 62 88, 72 80 Q 82 72, 88 80" stroke={dot} stroke-width="1" fill="none" opacity="0.6" filter="url(#soft-glow)">
    <animate attributeName="d" values="M 32 80 Q 42 72, 52 80 Q 62 88, 72 80 Q 82 72, 88 80;M 32 80 Q 42 88, 52 80 Q 62 72, 72 80 Q 82 88, 88 80;M 32 80 Q 42 72, 52 80 Q 62 88, 72 80 Q 82 72, 88 80" dur="3s" repeatCount="indefinite"/>
  </path>
  <path d="M 32 80 Q 42 88, 52 80 Q 62 72, 72 80 Q 82 88, 88 80" stroke={line} stroke-width="0.5" fill="none" opacity="0.3">
    <animate attributeName="d" values="M 32 80 Q 42 88, 52 80 Q 62 72, 72 80 Q 82 88, 88 80;M 32 80 Q 42 72, 52 80 Q 62 88, 72 80 Q 82 72, 88 80;M 32 80 Q 42 88, 52 80 Q 62 72, 72 80 Q 82 88, 88 80" dur="3s" repeatCount="indefinite"/>
  </path>

  <rect x="20" y="120" width="80" height="55" rx="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="60" y="138" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace" letter-spacing="1">VIBR</text>
  <line x1="32" y1="144" x2="88" y2="144" stroke={ring} stroke-width="0.3" opacity="0.2"/>

  <polyline points="32,160 38,154 44,166 50,152 56,164 62,156 68,168 74,150 80,162 88,158" stroke={dot} stroke-width="0.8" fill="none" opacity="0.6" filter="url(#soft-glow)">
    <animate attributeName="points" values="32,160 38,154 44,166 50,152 56,164 62,156 68,168 74,150 80,162 88,158; 32,158 38,162 44,150 50,168 56,156 62,164 68,152 74,166 80,154 88,160; 32,160 38,154 44,166 50,152 56,164 62,156 68,168 74,150 80,162 88,158" dur="0.8s" repeatCount="indefinite"/>
  </polyline>

  <rect x="20" y="200" width="80" height="55" rx="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="60" y="218" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace" letter-spacing="1">PRESS</text>
  <line x1="32" y1="224" x2="88" y2="224" stroke={ring} stroke-width="0.3" opacity="0.2"/>

  <path d="M 42 244 A 18 18 0 0 1 78 244" stroke={ring} stroke-width="1.5" stroke-dasharray="2 4" fill="none" opacity="0.3"/>
  <path d="M 42 244 A 18 18 0 0 1 65 227" stroke={dot} stroke-width="1.5" fill="none" opacity="0.7" filter="url(#soft-glow)">
    <animate attributeName="d" values="M 42 244 A 18 18 0 0 1 50 229; M 42 244 A 18 18 0 0 1 75 229; M 42 244 A 18 18 0 0 1 50 229" dur="5s" repeatCount="indefinite"/>
  </path>

  <rect x="20" y="280" width="80" height="55" rx="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="60" y="298" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace" letter-spacing="1">FLOW</text>
  <line x1="32" y1="304" x2="88" y2="304" stroke={ring} stroke-width="0.3" opacity="0.2"/>

  <rect x="35" y="312" width="50" height="10" rx="5" fill="none" stroke={ring} stroke-width="0.5" opacity="0.3"/>
  <rect x="38" y="314" width="44" height="6" rx="3" fill="none" stroke={dot} stroke-width="3" stroke-dasharray="3 4" opacity="0.5" filter="url(#soft-glow)">
    <animate attributeName="stroke-dashoffset" values="7;0" dur="0.8s" repeatCount="indefinite"/>
  </rect>

  <rect x="160" y="105" width="85" height="100" rx="8" fill={node} opacity="0.06" stroke={ring} stroke-width="0.8" stroke-opacity="0.4"/>
  <text x="202" y="125" text-anchor="middle" fill={dot} font-size="8" opacity="0.7" font-family="monospace" letter-spacing="2">EDGE</text>
  <text x="202" y="136" text-anchor="middle" fill={dot} font-size="6" opacity="0.4" font-family="monospace">GATEWAY</text>

  <g transform="translate(202, 160)">
    <circle cx="0" cy="0" r="16" fill="none" stroke={ring} stroke-width="0.6" stroke-dasharray="6 3 2 3" opacity="0.4">
      <animateTransform attributeName="transform" type="rotate" from="0" to="360" dur="12s" repeatCount="indefinite"/>
    </circle>
    <circle cx="0" cy="0" r="11" fill="none" stroke={dot} stroke-width="0.5" stroke-dasharray="10 6" opacity="0.6">
      <animateTransform attributeName="transform" type="rotate" from="360" to="0" dur="8s" repeatCount="indefinite"/>
    </circle>
    <circle cx="0" cy="0" r="3" fill={dot} opacity="0.7" filter="url(#soft-glow)">
      <animate attributeName="opacity" values="0.4;0.9;0.4" dur="2s" repeatCount="indefinite"/>
    </circle>
  </g>

  <g transform="translate(182, 190)">
    <circle cx="0" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.1;0.6;0.1" dur="1.2s" repeatCount="indefinite"/></circle>
    <circle cx="6" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.6;0.1;0.6" dur="1.5s" repeatCount="indefinite"/></circle>
    <circle cx="12" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.1;0.6;0.1" dur="0.9s" repeatCount="indefinite"/></circle>
    <circle cx="18" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.6;0.1;0.6" dur="1.8s" repeatCount="indefinite"/></circle>
    <circle cx="24" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.1;0.6;0.1" dur="1.1s" repeatCount="indefinite"/></circle>
    <circle cx="30" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.6;0.1;0.6" dur="1.4s" repeatCount="indefinite"/></circle>
    <circle cx="36" cy="0" r="1.2" fill={dot}><animate attributeName="opacity" values="0.1;0.6;0.1" dur="1.0s" repeatCount="indefinite"/></circle>
  </g>

  <rect x="275" y="35" width="110" height="95" rx="8" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="330" y="55" text-anchor="middle" fill={dot} font-size="7" opacity="0.6" font-family="monospace" letter-spacing="1">ANALYTICS</text>

  <polygon points="292,100 292,100 305,88 318,95 331,82 344,90 357,78 370,85 370,100" fill="url(#chart-fill)"/>
  <polyline points="292,100 305,88 318,95 331,82 344,90 357,78 370,85" stroke={dot} stroke-width="1" fill="none" opacity="0.7" filter="url(#soft-glow)"/>

  <line x1="292" y1="75" x2="292" y2="100" stroke={dot} stroke-width="0.5" opacity="0.3">
    <animate attributeName="x1" values="292;370;292" dur="4s" repeatCount="indefinite"/>
    <animate attributeName="x2" values="292;370;292" dur="4s" repeatCount="indefinite"/>
  </line>

  <rect x="275" y="160" width="110" height="70" rx="8" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="330" y="180" text-anchor="middle" fill={dot} font-size="7" opacity="0.6" font-family="monospace" letter-spacing="1">ALERTS</text>

  <g transform="translate(320, 205)">
    <circle cx="0" cy="0" r="0" fill="none" stroke={dot} stroke-width="0.5" opacity="0">
      <animate attributeName="r" values="5; 16" dur="2s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.4; 0" dur="2s" repeatCount="indefinite"/>
    </circle>

    <polygon points="0,-9 -9,7 9,7" fill="none" stroke={dot} stroke-width="1" opacity="0.7" filter="url(#soft-glow)">
      <animateTransform attributeName="transform" type="scale" values="1; 1.05; 1" dur="1.5s" repeatCount="indefinite"/>
    </polygon>
    <text x="0" y="4" text-anchor="middle" fill={dot} font-size="7" opacity="0.8">!</text>
  </g>

  <rect x="275" y="255" width="110" height="60" rx="8" fill={node} opacity="0.04" stroke={ring} stroke-width="0.6" stroke-opacity="0.3"/>
  <text x="330" y="273" text-anchor="middle" fill={dot} font-size="6" opacity="0.5" font-family="monospace" letter-spacing="1">PREDICTIVE</text>

  <g transform="translate(290, 285)">
    <rect x="0" y="0" width="80" height="6" rx="2" fill={ring} opacity="0.1"/>
    <rect x="0" y="0" width="18" height="6" rx="2" fill={dot} opacity="0.5"/>
    <rect x="20" y="0" width="18" height="6" rx="2" fill={dot} opacity="0.5"/>
    <rect x="40" y="0" width="18" height="6" rx="2" fill={dot} opacity="0.2">
      <animate attributeName="opacity" values="0.1; 0.5; 0.1" dur="2.5s" repeatCount="indefinite"/>
    </rect>
    <rect x="60" y="0" width="18" height="6" rx="2" fill="none" stroke={dot} stroke-width="0.5" opacity="0.2"/>
  </g>
  <text x="330" y="306" text-anchor="middle" fill={dot} font-size="5" opacity="0.5" font-family="monospace">HEALTH: 62%</text>

  <g transform="translate(120, 48)">
    <rect width="36" height="14" rx="3" fill={node} opacity="0.1" stroke={dot} stroke-width="0.3" stroke-opacity="0.4"/>
    <text x="18" y="9.5" text-anchor="middle" fill={dot} font-size="5" opacity="0.6" font-family="monospace">MQTT</text>
  </g>
  <g transform="translate(115, 240)">
    <rect width="46" height="14" rx="3" fill={node} opacity="0.1" stroke={dot} stroke-width="0.3" stroke-opacity="0.4"/>
    <text x="23" y="9.5" text-anchor="middle" fill={dot} font-size="5" opacity="0.6" font-family="monospace">OPC-UA</text>
  </g>

  <g filter="url(#soft-glow)">
    <circle cx="380" cy="340" r="1" fill={dot}><animate attributeName="opacity" values="0;0.5;0" dur="4s" repeatCount="indefinite"/></circle>
    <circle cx="15" cy="370" r="1" fill={dot}><animate attributeName="opacity" values="0;0.5;0" dur="5s" repeatCount="indefinite" begin="1s"/></circle>
    <circle cx="200" cy="380" r="1.5" fill={dot}><animate attributeName="opacity" values="0;0.4;0" dur="6s" repeatCount="indefinite" begin="2s"/></circle>
    <circle cx="200" cy="20" r="1" fill={dot}><animate attributeName="opacity" values="0;0.6;0" dur="4.5s" repeatCount="indefinite" begin="0.5s"/></circle>
  </g>
</svg>