---
/**
 * Gov & Defense: Zero-Trust Secure Enclave encapsulating All-Source Intelligence Fusion
 */
interface Props { ring: string; dot: string; node: string; line: string; }
const { ring, dot, node, line } = Astro.props;
---

<svg viewBox="0 0 420 400" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-lg opacity-50">
  <defs>
    <filter id="core-glow" x="-40%" y="-40%" width="180%" height="180%">
      <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
      <feComponentTransfer in="coloredBlur" result="glow">
         <feFuncA type="linear" slope="0.7"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode in="glow"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <linearGradient id="scanner" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color={dot} stop-opacity="0"/>
      <stop offset="50%" stop-color={dot} stop-opacity="0.3"/>
      <stop offset="100%" stop-color={dot} stop-opacity="0"/>
    </linearGradient>

    <linearGradient id="panel-bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color={node} stop-opacity="0.12"/>
      <stop offset="100%" stop-color={node} stop-opacity="0.02"/>
    </linearGradient>

    <radialGradient id="bubble-glow" cx="50%" cy="50%" r="50%">
      <stop offset="70%" stop-color={node} stop-opacity="0"/>
      <stop offset="96%" stop-color={dot} stop-opacity="0.05"/>
      <stop offset="100%" stop-color={dot} stop-opacity="0.25"/>
    </radialGradient>
  </defs>

  <g opacity="0.03" stroke={ring} stroke-width="0.5">
    <line x1="20" y1="180" x2="400" y2="180" stroke-dasharray="4 4"/>
    <line x1="210" y1="20" x2="210" y2="340" stroke-dasharray="4 4"/>
  </g>

  <g id="secure-enclave">
    <circle cx="210" cy="175" r="170" fill="url(#bubble-glow)">
      <animate attributeName="opacity" values="0.8; 1; 0.8" dur="4s" repeatCount="indefinite"/>
    </circle>

    <circle cx="210" cy="175" r="170" fill="none" stroke={dot} stroke-width="1.5" stroke-dasharray="100 20 10 20 40 40" opacity="0.4" filter="url(#core-glow)">
      <animateTransform attributeName="transform" type="rotate" from="0 210 175" to="360 210 175" dur="45s" repeatCount="indefinite"/>
    </circle>

    <circle cx="210" cy="175" r="166" fill="none" stroke={ring} stroke-width="0.8" stroke-dasharray="4 8" opacity="0.3">
      <animateTransform attributeName="transform" type="rotate" from="360 210 175" to="0 210 175" dur="30s" repeatCount="indefinite"/>
    </circle>

    <circle cx="210" cy="175" r="170" fill="none" stroke={dot} stroke-width="0.5" opacity="0">
      <animate attributeName="r" values="165; 175" dur="3s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.6; 0" dur="3s" repeatCount="indefinite"/>
    </circle>

    <g transform="translate(140, 5)">
      <path d="M 10 0 L 130 0 L 140 14 L 0 14 Z" fill={node} opacity="0.8" stroke={dot} stroke-width="0.8"/>
      <text x="70" y="10" text-anchor="middle" fill={dot} font-size="6" font-family="monospace" font-weight="bold" letter-spacing="2" filter="url(#core-glow)">RESTRICTED ENCLAVE</text>
    </g>
  </g>

  <g transform="translate(30, 45)">
    <path d="M 10 0 L 0 0 L 0 30 L 10 30 M 55 0 L 65 0 L 65 30 L 55 30" fill="none" stroke={ring} stroke-width="1" opacity="0.5"/>
    <rect x="5" y="2" width="55" height="26" fill="url(#panel-bg)"/>
    <circle cx="16" cy="15" r="6" fill="none" stroke={dot} stroke-width="0.8" opacity="0.6"/>
    <ellipse cx="16" cy="15" rx="3" ry="6" fill="none" stroke={dot} stroke-width="0.5" opacity="0.6"/>
    <line x1="10" y1="15" x2="22" y2="15" stroke={dot} stroke-width="0.5" opacity="0.6"/>
    <text x="30" y="17" fill={dot} font-size="6" font-family="monospace" font-weight="bold" letter-spacing="1" opacity="0.8">OSINT</text>
  </g>

  <g transform="translate(25, 115)">
    <path d="M 10 0 L 0 0 L 0 30 L 10 30 M 55 0 L 65 0 L 65 30 L 55 30" fill="none" stroke={ring} stroke-width="1" opacity="0.5"/>
    <rect x="5" y="2" width="55" height="26" fill="url(#panel-bg)"/>
    <circle cx="16" cy="15" r="5" fill="none" stroke={dot} stroke-width="0.8" opacity="0.6"/>
    <line x1="16" y1="7" x2="16" y2="11" stroke={dot} stroke-width="1" opacity="0.8"/>
    <line x1="16" y1="19" x2="16" y2="23" stroke={dot} stroke-width="1" opacity="0.8"/>
    <line x1="7" y1="15" x2="11" y2="15" stroke={dot} stroke-width="1" opacity="0.8"/>
    <line x1="21" y1="15" x2="25" y2="15" stroke={dot} stroke-width="1" opacity="0.8"/>
    <text x="30" y="17" fill={dot} font-size="6" font-family="monospace" font-weight="bold" letter-spacing="1" opacity="0.8">RECON</text>
  </g>

  <g transform="translate(25, 185)">
    <path d="M 10 0 L 0 0 L 0 30 L 10 30 M 55 0 L 65 0 L 65 30 L 55 30" fill="none" stroke={ring} stroke-width="1" opacity="0.5"/>
    <rect x="5" y="2" width="55" height="26" fill="url(#panel-bg)"/>
    <path d="M 10 15 Q 13 8, 16 15 T 22 15" fill="none" stroke={dot} stroke-width="1" opacity="0.8"/>
    <line x1="10" y1="15" x2="22" y2="15" stroke={dot} stroke-width="0.3" opacity="0.5" stroke-dasharray="1 1"/>
    <text x="30" y="17" fill={dot} font-size="6" font-family="monospace" font-weight="bold" letter-spacing="1" opacity="0.8">SIGINT</text>
  </g>

  <g transform="translate(45, 255)">
    <path d="M 10 0 L 0 0 L 0 35 L 10 35 M 55 0 L 65 0 L 65 35 L 55 35" fill="none" stroke={ring} stroke-width="1" opacity="0.5"/>
    <rect x="5" y="2" width="55" height="31" fill="url(#panel-bg)"/>
    <text x="32" y="12" text-anchor="middle" fill={dot} font-size="6" font-family="monospace" font-weight="bold" opacity="0.8">FWD EDGE</text>
    <rect x="12" y="17" width="40" height="3" fill={ring} opacity="0.2"/>
    <rect x="12" y="17" width="12" height="3" fill={dot} opacity="0.6">
      <animate attributeName="opacity" values="0; 0.6; 0.6; 0; 0" dur="8s" repeatCount="indefinite" begin="0s"/>
    </rect>
    <rect x="26" y="17" width="12" height="3" fill={dot} opacity="0.6">
      <animate attributeName="opacity" values="0; 0; 0.6; 0; 0" dur="8s" repeatCount="indefinite" begin="1s"/>
    </rect>
    <rect x="40" y="17" width="12" height="3" fill={dot} opacity="0.6">
      <animate attributeName="opacity" values="0; 0; 0; 0.6; 0" dur="8s" repeatCount="indefinite" begin="2s"/>
    </rect>
    <text x="32" y="27" text-anchor="middle" fill={dot} font-size="4" font-family="monospace" filter="url(#core-glow)">
      <tspan opacity="0"><animate attributeName="opacity" values="0; 0; 0; 1; 0" dur="8s" repeatCount="indefinite"/>SYNCING...</tspan>
    </text>
  </g>

  <g opacity="0.3" stroke={line} stroke-width="0.8" stroke-dasharray="2 4" fill="none">
    <path id="path-osint" d="M 95 60 C 130 60, 150 160, 175 170" />
    <path id="path-recon" d="M 90 130 C 130 130, 140 175, 175 175" />
    <path id="path-sigint" d="M 90 200 C 130 200, 140 185, 175 185" />
    <path id="path-edge" d="M 110 270 C 140 270, 150 200, 175 190" />
  </g>

  <g filter="url(#core-glow)">
    <g opacity="0"><circle r="1.5" fill={dot}/><animateMotion dur="1.2s" repeatCount="indefinite" path="M 95 60 C 130 60, 150 160, 175 170"/><animate attributeName="opacity" values="0;1;0" dur="1.2s" repeatCount="indefinite"/></g>
    <g opacity="0"><circle r="1" fill={dot}/><animateMotion dur="1.5s" repeatCount="indefinite" path="M 95 60 C 130 60, 150 160, 175 170" begin="0.4s"/><animate attributeName="opacity" values="0;0.8;0" dur="1.5s" repeatCount="indefinite" begin="0.4s"/></g>

    <g opacity="0"><rect x="-2" y="-2" width="4" height="4" fill={dot}/><animateMotion dur="1.8s" repeatCount="indefinite" path="M 90 130 C 130 130, 140 175, 175 175"/><animate attributeName="opacity" values="0;0.9;0" dur="1.8s" repeatCount="indefinite"/></g>

    <g opacity="0"><rect x="-3" y="-1" width="6" height="2" fill={dot}/><animateMotion dur="1.4s" repeatCount="indefinite" path="M 90 200 C 130 200, 140 185, 175 185"/><animate attributeName="opacity" values="0;1;0" dur="1.4s" repeatCount="indefinite"/></g>

    <g opacity="0"><rect x="-3" y="-3" width="6" height="6" rx="1" fill={dot}/><animateMotion dur="1s" repeatCount="indefinite" path="M 110 270 C 140 270, 150 200, 175 190" begin="4s"/><animate attributeName="opacity" values="0; 0; 1; 0; 0" dur="8s" repeatCount="indefinite"/></g>
    <g opacity="0"><rect x="-3" y="-3" width="6" height="6" rx="1" fill={dot}/><animateMotion dur="1s" repeatCount="indefinite" path="M 110 270 C 140 270, 150 200, 175 190" begin="4.4s"/><animate attributeName="opacity" values="0; 0; 1; 0; 0" dur="8s" repeatCount="indefinite"/></g>
  </g>

  <g transform="translate(210, 180)">
    <polygon points="0,-45 38,-22 38,22 0,45 -38,22 -38,-22" fill="url(#panel-bg)" stroke={ring} stroke-width="1.2" opacity="0.8"/>

    <g>
      <circle cx="0" cy="0" r="30" fill="none" stroke={ring} stroke-width="0.8" stroke-dasharray="10 4 2 4" opacity="0.8"/>
      <animateTransform attributeName="transform" type="rotate" from="0" to="360" dur="10s" repeatCount="indefinite"/>
    </g>
    <g>
      <circle cx="0" cy="0" r="22" fill="none" stroke={dot} stroke-width="1.5" stroke-dasharray="20 15" opacity="0.8" filter="url(#core-glow)"/>
      <animateTransform attributeName="transform" type="rotate" from="360" to="0" dur="6s" repeatCount="indefinite"/>
    </g>

    <circle cx="0" cy="0" r="10" fill={node} opacity="0.4" stroke={dot} stroke-width="1"/>
    <circle cx="0" cy="0" r="4" fill={dot} filter="url(#core-glow)">
      <animate attributeName="r" values="3; 5; 3" dur="0.8s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="0.5; 1; 0.5" dur="0.8s" repeatCount="indefinite"/>
    </circle>

    <text x="0" y="-52" text-anchor="middle" fill={dot} font-size="7" font-family="monospace" font-weight="bold" letter-spacing="1" opacity="0.9" filter="url(#core-glow)">FUSION ENGINE</text>
    <text x="0" y="58" text-anchor="middle" fill={dot} font-size="5" font-family="monospace" opacity="0.6">AI CORRELATION</text>
  </g>

  <line x1="250" y1="180" x2="285" y2="180" stroke={line} stroke-width="1" stroke-dasharray="4 4" opacity="0.4"/>
  <g filter="url(#core-glow)">
    <g opacity="0"><rect x="-2" y="-4" width="8" height="8" rx="1" fill={dot}/><animateMotion dur="1s" repeatCount="indefinite" path="M 250 180 L 285 180"/><animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite"/></g>
    <g opacity="0"><rect x="-2" y="-4" width="8" height="8" rx="1" fill={dot}/><animateMotion dur="1s" repeatCount="indefinite" path="M 250 180 L 285 180" begin="0.5s"/><animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" begin="0.5s"/></g>
  </g>

  <g transform="translate(290, 90)">
    <path d="M 0 0 L 105 0 L 105 180 L 0 180 Z" fill="url(#panel-bg)" stroke={ring} stroke-width="1" opacity="0.9"/>

    <path d="M -2 10 L -2 -2 L 10 -2" fill="none" stroke={dot} stroke-width="1.5" opacity="0.8"/>
    <path d="M 107 10 L 107 -2 L 95 -2" fill="none" stroke={dot} stroke-width="1.5" opacity="0.8"/>
    <path d="M -2 170 L -2 182 L 10 182" fill="none" stroke={dot} stroke-width="1.5" opacity="0.8"/>
    <path d="M 107 170 L 107 182 L 95 182" fill="none" stroke={dot} stroke-width="1.5" opacity="0.8"/>

    <text x="52" y="15" text-anchor="middle" fill={dot} font-size="7" font-family="monospace" font-weight="bold" letter-spacing="1" opacity="1" filter="url(#core-glow)">THREAT MATRIX</text>
    <line x1="5" y1="22" x2="100" y2="22" stroke={ring} stroke-width="0.5" opacity="0.5"/>

    <g transform="translate(8, 35)">
      <text x="0" y="0" fill={dot} font-size="5" font-family="monospace" opacity="0.6">[OSINT+SIG]</text>
      <text x="0" y="8" fill={dot} font-size="6" font-family="monospace" font-weight="bold" opacity="0.9">TGT-89X</text>
      <rect x="55" y="4" width="30" height="4" fill={dot} opacity="0.2"/>
      <rect x="55" y="4" width="28" height="4" fill={dot} opacity="0.8" filter="url(#core-glow)"/>
      <text x="88" y="8" fill={dot} font-size="4" font-family="monospace" opacity="0.7">98%</text>
    </g>

    <g transform="translate(8, 60)">
      <text x="0" y="0" fill={dot} font-size="5" font-family="monospace" opacity="0.6">[ISR/RECON]</text>
      <text x="0" y="8" fill={dot} font-size="6" font-family="monospace" font-weight="bold" opacity="0.9">UAV-02A</text>
      <rect x="55" y="4" width="30" height="4" fill={dot} opacity="0.2"/>
      <rect x="55" y="4" width="24" height="4" fill={dot} opacity="0.6"/>
      <text x="88" y="8" fill={dot} font-size="4" font-family="monospace" opacity="0.7">82%</text>
    </g>

    <g transform="translate(8, 85)">
      <text x="0" y="0" fill={dot} font-size="5" font-family="monospace" opacity="0.6">[FWD EDGE]</text>
      <text x="0" y="8" fill={dot} font-size="6" font-family="monospace" font-weight="bold">
         <tspan fill={ring}><animate attributeName="opacity" values="0.4; 0.4; 0; 0; 0.4" dur="8s" repeatCount="indefinite"/>OFFLINE</tspan>
         <tspan fill={dot} filter="url(#core-glow)"><animate attributeName="opacity" values="0; 0; 1; 1; 0" dur="8s" repeatCount="indefinite"/>SYNCED</tspan>
      </text>
      <rect x="55" y="4" width="30" height="4" fill={ring} opacity="0.1"/>
      <rect x="55" y="4" width="26" height="4" fill={dot} opacity="0">
         <animate attributeName="opacity" values="0; 0; 0.8; 0.8; 0" dur="8s" repeatCount="indefinite"/>
      </rect>
    </g>

    <rect x="0" y="25" width="105" height="20" fill="url(#scanner)">
      <animate attributeName="y" values="25; 150; 25" dur="3.5s" repeatCount="indefinite"/>
    </rect>
    <line x1="0" y1="25" x2="105" y2="25" stroke={dot} stroke-width="0.5" opacity="0.5" filter="url(#core-glow)">
      <animate attributeName="y1" values="45; 170; 45" dur="3.5s" repeatCount="indefinite"/>
      <animate attributeName="y2" values="45; 170; 45" dur="3.5s" repeatCount="indefinite"/>
    </line>
  </g>

  <g transform="translate(20, 370)">
    <rect x="0" y="0" width="380" height="15" fill={node} opacity="0.1" stroke={ring} stroke-width="0.5"/>
    <text x="10" y="10" fill={dot} font-size="6" font-family="monospace" font-weight="bold" opacity="0.8">SYS LOG ></text>

    <clipPath id="ticker-clip">
      <rect x="50" y="0" width="320" height="15" />
    </clipPath>

    <g clip-path="url(#ticker-clip)">
      <text x="320" y="10" fill={dot} font-size="5" font-family="monospace" opacity="0.6">
        <animate attributeName="x" values="320; -350" dur="15s" repeatCount="indefinite"/>
        ENCLAVE INTEGRITY VERIFIED ... INGESTING OSINT STREAMS ... CORRELATING SIGINT WAVEFORMS ... UPDATING THREAT MATRIX ... JADC2 PROTOCOL ACTIVE ...
      </text>
    </g>
  </g>

  <g filter="url(#core-glow)">
    <circle cx="210" cy="30" r="1.5" fill={dot} opacity="0"><animate attributeName="opacity" values="0;0.5;0" dur="4s" repeatCount="indefinite"/></circle>
    <circle cx="45" cy="340" r="1" fill={dot} opacity="0"><animate attributeName="opacity" values="0;0.4;0" dur="5s" repeatCount="indefinite" begin="1s"/></circle>
    <circle cx="380" cy="320" r="1.5" fill={dot} opacity="0"><animate attributeName="opacity" values="0;0.3;0" dur="6s" repeatCount="indefinite" begin="2s"/></circle>
  </g>
</svg>