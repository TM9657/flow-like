---
/**
 * Gov & Defense: Shield with rotating security perimeters, lock icon, audit trail
 */
interface Props { ring: string; dot: string; node: string; line: string; }
const { ring, dot, node, line } = Astro.props;
---

<svg viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full max-w-md">
  <defs>
    <clipPath id="gd-shield">
      <path d="M200,40 L320,100 L320,220 Q320,320 200,370 Q80,320 80,220 L80,100 Z"/>
    </clipPath>
    <radialGradient id="gd-glow" cx="50%" cy="40%" r="50%">
      <stop offset="0%" stop-color={dot} stop-opacity="0.1"/>
      <stop offset="100%" stop-color={dot} stop-opacity="0"/>
    </radialGradient>
  </defs>

  <!-- Shield background glow -->
  <ellipse cx="200" cy="200" rx="170" ry="190" fill="url(#gd-glow)"/>

  <!-- Outer rotating security perimeter -->
  <circle cx="200" cy="200" r="180" stroke={ring} stroke-width="0.8" stroke-dasharray="12 8 4 8" opacity="0.12">
    <animateTransform attributeName="transform" type="rotate" from="0 200 200" to="360 200 200" dur="90s" repeatCount="indefinite"/>
  </circle>

  <!-- Middle perimeter (counter-rotating) -->
  <circle cx="200" cy="200" r="155" stroke={ring} stroke-width="0.6" stroke-dasharray="6 10" opacity="0.1">
    <animateTransform attributeName="transform" type="rotate" from="360 200 200" to="0 200 200" dur="60s" repeatCount="indefinite"/>
  </circle>

  <!-- Shield outline -->
  <path d="M200,50 L310,105 L310,215 Q310,310 200,358 Q90,310 90,215 L90,105 Z"
    stroke={ring} stroke-width="1.2" fill="none" opacity="0.25"/>
  <path d="M200,50 L310,105 L310,215 Q310,310 200,358 Q90,310 90,215 L90,105 Z"
    fill={node} opacity="0.03"/>

  <!-- Inner shield layer -->
  <path d="M200,85 L280,125 L280,210 Q280,285 200,325 Q120,285 120,210 L120,125 Z"
    stroke={ring} stroke-width="0.6" fill="none" opacity="0.15" stroke-dasharray="4 4"/>

  <!-- Lock icon in center -->
  <rect x="178" y="175" width="44" height="35" rx="6" fill={node} opacity="0.06" stroke={ring} stroke-width="0.8" opacity="0.3"/>
  <path d="M188,175 L188,162 Q188,148 200,148 Q212,148 212,162 L212,175" stroke={ring} stroke-width="1.2" fill="none" opacity="0.3"/>
  <circle cx="200" cy="192" r="5" fill={dot} opacity="0.5">
    <animate attributeName="opacity" values="0.3;0.7;0.3" dur="3s" repeatCount="indefinite"/>
  </circle>
  <line x1="200" y1="197" x2="200" y2="203" stroke={dot} stroke-width="1.5" opacity="0.4"/>

  <!-- Security nodes at cardinal points -->
  <!-- Top: Auth -->
  <rect x="177" y="65" width="46" height="22" rx="6" fill={node} opacity="0.05" stroke={ring} stroke-width="0.6" opacity="0.2"/>
  <text x="200" y="79" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace">AUTH</text>
  <line x1="200" y1="87" x2="200" y2="148" stroke={line} stroke-width="0.5" opacity="0.12" stroke-dasharray="3 3"/>

  <!-- Right: Audit -->
  <rect x="295" y="165" width="50" height="22" rx="6" fill={node} opacity="0.05" stroke={ring} stroke-width="0.6" opacity="0.2"/>
  <text x="320" y="179" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace">AUDIT</text>
  <line x1="295" y1="176" x2="222" y2="190" stroke={line} stroke-width="0.5" opacity="0.12" stroke-dasharray="3 3"/>

  <!-- Bottom: SBOM -->
  <rect x="177" y="320" width="46" height="22" rx="6" fill={node} opacity="0.05" stroke={ring} stroke-width="0.6" opacity="0.2"/>
  <text x="200" y="334" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace">SBOM</text>
  <line x1="200" y1="320" x2="200" y2="210" stroke={line} stroke-width="0.5" opacity="0.12" stroke-dasharray="3 3"/>

  <!-- Left: RBAC -->
  <rect x="55" y="165" width="48" height="22" rx="6" fill={node} opacity="0.05" stroke={ring} stroke-width="0.6" opacity="0.2"/>
  <text x="79" y="179" text-anchor="middle" fill={dot} font-size="7" opacity="0.5" font-family="monospace">RBAC</text>
  <line x1="103" y1="176" x2="178" y2="190" stroke={line} stroke-width="0.5" opacity="0.12" stroke-dasharray="3 3"/>

  <!-- Corner security nodes -->
  <circle cx="120" cy="100" r="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.5" opacity="0.15"/>
  <circle cx="120" cy="100" r="2" fill={dot} opacity="0.3"><animate attributeName="opacity" values="0.2;0.5;0.2" dur="3s" repeatCount="indefinite"/></circle>
  <text x="120" y="90" text-anchor="middle" fill={dot} font-size="5" opacity="0.3">TLS</text>

  <circle cx="280" cy="100" r="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.5" opacity="0.15"/>
  <circle cx="280" cy="100" r="2" fill={dot} opacity="0.3"><animate attributeName="opacity" values="0.3;0.6;0.3" dur="2.5s" repeatCount="indefinite"/></circle>
  <text x="280" y="90" text-anchor="middle" fill={dot} font-size="5" opacity="0.3">PKI</text>

  <circle cx="130" cy="290" r="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.5" opacity="0.15"/>
  <circle cx="130" cy="290" r="2" fill={dot} opacity="0.3"><animate attributeName="opacity" values="0.15;0.45;0.15" dur="3.5s" repeatCount="indefinite"/></circle>
  <text x="130" y="280" text-anchor="middle" fill={dot} font-size="5" opacity="0.3">WASM</text>

  <circle cx="270" cy="290" r="6" fill={node} opacity="0.04" stroke={ring} stroke-width="0.5" opacity="0.15"/>
  <circle cx="270" cy="290" r="2" fill={dot} opacity="0.3"><animate attributeName="opacity" values="0.25;0.55;0.25" dur="2.8s" repeatCount="indefinite"/></circle>
  <text x="270" y="280" text-anchor="middle" fill={dot} font-size="5" opacity="0.3">CAC</text>

  <!-- Scanning beam rotating around shield -->
  <line x1="200" y1="200" x2="200" y2="50" stroke={dot} stroke-width="0.8" opacity="0.15">
    <animateTransform attributeName="transform" type="rotate" from="0 200 200" to="360 200 200" dur="8s" repeatCount="indefinite"/>
  </line>
  <!-- Beam leading dot -->
  <circle r="3" fill={dot} opacity="0.5" filter="url(#gd-pulse)">
    <animateMotion dur="8s" repeatCount="indefinite" path="M200,50 A150,150 0 0,1 350,200 A150,150 0 0,1 200,350 A150,150 0 0,1 50,200 A150,150 0 0,1 200,50"/>
  </circle>

  <!-- Data packet animations to lock -->
  <circle r="2" fill={dot} opacity="0.7">
    <animateMotion dur="2.5s" repeatCount="indefinite" path="M 200,87 L 200,148"/>
  </circle>
  <circle r="2" fill={dot} opacity="0.6">
    <animateMotion dur="2.5s" repeatCount="indefinite" path="M 295,176 L 222,190" begin="0.6s"/>
  </circle>
  <circle r="2" fill={dot} opacity="0.5">
    <animateMotion dur="2.5s" repeatCount="indefinite" path="M 103,176 L 178,190" begin="1.2s"/>
  </circle>
  <circle r="2" fill={dot} opacity="0.6">
    <animateMotion dur="2.5s" repeatCount="indefinite" path="M 200,320 L 200,210" begin="1.8s"/>
  </circle>

  <!-- Air-gap indicator ring -->
  <circle cx="200" cy="200" r="130" stroke={ring} stroke-width="2" stroke-dasharray="2 6" opacity="0.08">
    <animate attributeName="stroke-dashoffset" values="0;40" dur="10s" repeatCount="indefinite"/>
  </circle>

  <!-- Ambient -->
  <circle cx="30" cy="30" r="1.5" fill={dot}><animate attributeName="opacity" values="0.1;0.3;0.1" dur="5s" repeatCount="indefinite"/></circle>
  <circle cx="370" cy="370" r="1.5" fill={dot}><animate attributeName="opacity" values="0.1;0.25;0.1" dur="6s" repeatCount="indefinite"/></circle>
  <circle cx="370" cy="50" r="1" fill={dot}><animate attributeName="opacity" values="0.05;0.2;0.05" dur="4s" repeatCount="indefinite"/></circle>
  <circle cx="30" cy="370" r="1" fill={dot}><animate attributeName="opacity" values="0.08;0.22;0.08" dur="5.5s" repeatCount="indefinite"/></circle>
</svg>
