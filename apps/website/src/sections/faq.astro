---
import { LuChevronDown } from "react-icons/lu";
import type { Lang, TranslationKey } from "../i18n";
import { translations, defaultLang } from "../i18n";

interface Props {
  lang?: Lang;
}

const { lang = defaultLang } = Astro.props;
const t = (key: TranslationKey): string => {
  const langTranslations = translations[lang] as Record<string, string>;
  const enTranslations = translations.en as Record<string, string>;
  return langTranslations?.[key] ?? enTranslations[key] ?? key;
};

const faqs = [
  { q: t("faq.q1"), a: t("faq.a1") },
  { q: t("faq.q2"), a: t("faq.a2") },
  { q: t("faq.q3"), a: t("faq.a3") },
  { q: t("faq.q4"), a: t("faq.a4") },
  { q: t("faq.q5"), a: t("faq.a5") },
  { q: t("faq.q6"), a: t("faq.a6") },
];
---

<section
  class="relative py-24"
  data-c1="hsl(222 50% 55% / .04)"
  data-c2="hsl(200 40% 50% / .04)"
>
  <!-- Horizontal accent line -->
  <div
    aria-hidden="true"
    class="pointer-events-none absolute top-1/3 right-0 w-1/4 h-px bg-linear-to-l from-transparent via-border to-transparent"
  ></div>

  <div class="mx-auto max-w-3xl px-6 lg:px-8">
    <!-- Minimal header -->
    <div class="mb-16">
      <p class="text-[11px] font-medium tracking-[0.3em] uppercase text-muted-foreground mb-4">
        {t("faq.tagline")}
      </p>
      <h2 class="text-3xl sm:text-4xl font-semibold tracking-tight text-foreground leading-[1.2]">
        {t("faq.headline")}
      </h2>
    </div>

    <!-- Minimal accordion -->
    <div class="divide-y divide-border/50">
      {faqs.map((faq, i) => (
        <details class="group py-6 first:pt-0" open={i === 0}>
          <summary class="flex cursor-pointer list-none items-center justify-between text-left">
            <span class="text-base font-medium text-foreground pr-8">
              {faq.q}
            </span>
            <LuChevronDown className="w-4 h-4 text-muted-foreground shrink-0 transition-transform duration-200 group-open:rotate-180" />
          </summary>
          <div class="faq-content">
            <p class="pt-4 text-sm text-muted-foreground leading-relaxed">
              {faq.a}
            </p>
          </div>
        </details>
      ))}
    </div>
  </div>
</section>

<style>
  .faq-content {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.2s ease;
  }
  details[open] .faq-content {
    grid-template-rows: 1fr;
  }
  .faq-content > * {
    overflow: hidden;
  }
</style>
