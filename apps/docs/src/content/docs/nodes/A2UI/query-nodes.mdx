---
title: Query Nodes
description: Find and filter collections of A2UI elements
---

import { Aside } from '@astrojs/starlight/components';

# Query Nodes

Query nodes allow you to find collections of elements based on type, ID patterns, or hierarchy relationships.

---

## Query Elements by Type

Finds all elements of a specific component type on the page.

### Inputs

| Pin | Type | Description |
|-----|------|-------------|
| Component Type | String | Type to search for (e.g., "Button", "TextField") |

### Outputs

| Pin | Type | Description |
|-----|------|-------------|
| Elements | Array | Array of matching element objects |
| Element IDs | Array | Array of element reference strings |
| Count | Integer | Number of matches found |

### Example

**Input:** `Component Type = "Button"`

**Output:**
```json
{
  "elements": [
    { "type": "Button", "component": { "label": "Submit" } },
    { "type": "Button", "component": { "label": "Cancel" } }
  ],
  "element_ids": ["main/submit-btn", "main/cancel-btn"],
  "count": 2
}
```

---

## Query Elements by ID

Finds elements whose IDs match a pattern.

### Inputs

| Pin | Type | Description |
|-----|------|-------------|
| Pattern | String | The pattern to match against |
| Match Type | Dropdown | How to match: `starts_with`, `ends_with`, `contains`, `exact` |

### Outputs

| Pin | Type | Description |
|-----|------|-------------|
| Elements | Array | Array of matching element objects |
| Element IDs | Array | Array of element reference strings |
| Count | Integer | Number of matches found |

### Match Types

| Match Type | Pattern | Matches |
|------------|---------|---------|
| `starts_with` | `item-` | `item-1`, `item-2`, `item-foo` |
| `ends_with` | `-btn` | `submit-btn`, `cancel-btn` |
| `contains` | `user` | `user-name`, `current-user`, `user` |
| `exact` | `main-title` | Only `main-title` |

<Aside type="tip">
Use naming conventions like prefixes (`form-`, `list-item-`) to make querying easier.
</Aside>

---

## Query Children

Gets all direct children of a container element.

### Inputs

| Pin | Type | Description |
|-----|------|-------------|
| Element Ref | String | Reference to the parent container |

### Outputs

| Pin | Type | Description |
|-----|------|-------------|
| Children | Array | Array of child element objects |
| Child IDs | Array | Array of child element reference strings |
| Count | Integer | Number of children |

### Example

For a container with three items:
```
Container (cards-list)
├── Card (card-1)
├── Card (card-2)
└── Card (card-3)
```

**Input:** `Element Ref = "main/cards-list"`

**Output:**
```json
{
  "child_ids": ["main/card-1", "main/card-2", "main/card-3"],
  "count": 3
}
```

---

## Query Parent

Finds the parent container of an element.

### Inputs

| Pin | Type | Description |
|-----|------|-------------|
| Element Ref | String | Reference to the child element |

### Outputs

| Pin | Type | Description |
|-----|------|-------------|
| Parent | JSON | Parent element object |
| Parent ID | String | Parent element reference |
| Has Parent | Boolean | Whether a parent was found |

### Example

**Input:** `Element Ref = "main/submit-button"`

**Output:**
```json
{
  "parent_id": "main/form-actions",
  "has_parent": true
}
```

<Aside type="note">
Root-level elements may not have a parent, in which case `has_parent` will be `false`.
</Aside>

---

## Common Patterns

### Bulk Operations

Disable all buttons:
```
[Query Elements by Type: "Button"]
   → [Loop: element_ids]
      → [Set Element Disabled: true]
```

### Clear Dynamic Items

Remove all dynamically created items:
```
[Query Elements by ID: "dynamic-item-*" (starts_with)]
   → [Loop: element_ids]
      → [Remove Element]
```

### Validate All Inputs

Check all text fields:
```
[Query Elements by Type: "TextField"]
   → [Loop: elements]
      → [Get Element Value]
      → [Branch: isEmpty]
         └─ True: [Set Element Style: border-red]
```

### Navigate Hierarchy

Find siblings:
```
[Query Parent: current_element]
   → [Query Children: parent_id]
   → [Filter: id != current_element]
   → siblings
```

---

## Performance Considerations

- Queries run against the `_elements` payload, which is already loaded
- No network requests are made during queries
- For large pages with many elements, use specific patterns to limit results
- Prefer `exact` match when you know the ID
