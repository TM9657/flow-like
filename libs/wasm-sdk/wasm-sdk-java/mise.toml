[tools]
java = "21"
maven = "3.9"

[tasks.setup]
description = "Install dependencies"
run = "mvn dependency:resolve -q"

[tasks.build]
description = "Build the SDK JAR"
run = "mvn package -DskipTests -q"

[tasks.test]
description = "Run tests"
run = "mvn test"

[tasks.clean]
description = "Clean build artifacts"
run = "mvn clean -q"

[tasks.publish]
description = "Publish to Maven Central via Sonatype OSSRH"
depends = ["build"]
run = """
echo "Publishing flow-like-wasm-sdk-java to Maven Central..."
echo "Requires: MAVEN_GPG_PASSPHRASE, OSSRH_USERNAME, OSSRH_TOKEN env vars"
echo "and ~/.m2/settings.xml configured with sonatype-nexus credentials."
mvn deploy -P release -DskipTests
"""

[tasks."publish:local"]
description = "Install to local Maven repository (~/.m2/repository)"
depends = ["build"]
run = "mvn install -DskipTests -q"
